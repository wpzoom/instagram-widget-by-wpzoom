(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,a,n){return(a=function(e){var a=function(e){if("object"!=t(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(a)?a:a+""}(a))in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}var a;(a=jQuery)(window).on("load",(function(){var t=!1;function n(){a(".wpzinsta-pro-load-more-btn").off("click.loadmore").on("click.loadmore",(function(t){t.preventDefault();var e=a(this),n=e.closest(".wpzinsta-pro-load-more-wrapper"),i=e.closest(".zoom-instagram"),o=i.find(".zoom-instagram-widget__items");if("true"!==n.attr("data-disabled")&&!e.prop("disabled")&&!e.hasClass("loading")){var r=e.attr("data-feed-id"),s=e.attr("data-item-amount"),d=e.attr("data-image-size"),m=e.attr("data-allowed-post-types"),l=e.attr("data-next-url"),c=e.attr("data-nonce");if(l){e.addClass("loading").prop("disabled",!0),n.addClass("loading");var g=e.find(".button-text").text();e.find(".button-text").text("Loading..."),a.ajax({url:wpzInstaAjax.ajaxurl,type:"POST",dataType:"json",data:{action:"wpzoom_instagram_load_more",feed_id:r,item_amount:s,image_size:d,allowed_post_types:m,next:l,_wpnonce:c},success:function(t){if(t.success&&t.data.html){var n=o.find("li").length;if(o.append(t.data.html),t.data.has_more&&t.data.next_url?e.attr("data-next-url",t.data.next_url):e.hide(),o.zoomLoadAsyncImages(),o.hasClass("layout-masonry")&&"function"==typeof a.fn.masonry){var r=o.find("li").slice(n);o.data("masonry")||o.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(o.data("spacing")||10)}),o.masonry("appended",r)}else setTimeout((function(){o.zoomInstagramWidget({onlyNewItems:!0,startIndex:n})}),100);i.trigger("wpz-insta:loaded-more",[t.data])}else console.error("Load more failed:",t.data||"Unknown error"),e.hide()},error:function(t,a,n){console.error("AJAX load more error:",n),e.hide()},complete:function(){e.removeClass("loading").prop("disabled",!1),n.removeClass("loading"),e.find(".button-text").text(g)}})}else e.hide()}}))}function i(){a(".zoom-instagram-widget__items").each((function(){var t=a(this);t.hasClass("layout-masonry")&&"function"==typeof a.fn.masonry?t.data("masonry")?t.masonry("layout"):t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()})),t=!1}n(),a.fn.zoomLoadAsyncImages=function(){return a(this).each((function(){var t=a(this),e=t.data("image-width"),n=t.data("image-resolution"),i=t.find("li").filter((function(){return a(this).data("media-id")})).map((function(){return{"media-id":a(this).attr("data-media-id"),nonce:a(this).attr("data-nonce"),"regenerate-thumbnails":a(this)[0].hasAttribute("data-regenerate-thumbnails")}}));i.length&&function(a,i){i=i||3;for(var o=0;o<a.length;o+=i)a.slice(o,o+i).forEach((function(a){wp.ajax.post("wpzoom_instagram_get_image_async",{"media-id":a["media-id"],nonce:a.nonce,"image-resolution":n,"image-width":e,"regenerate-thumbnails":a["regenerate-thumbnails"]}).done((function(e){t.find('li[data-media-id="'+a["media-id"]+'"] .zoom-instagram-link').css("background-image","url("+e.image_src+")")})).fail((function(){}))}))}(i.toArray(),3)}))},a.fn.zoomLightbox=function(){return a(this).each((function(){var t=a(this).closest(".widget").find(".wpz-insta-lightbox-wrapper > .swiper");if(t.length>0){var n=t.find(".image-wrapper > .swiper"),i=new Swiper(t.get(0),e(e(e(e(e(e(e(e(e({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"autoHeight",!1),"watchOverflow",!0),"navigation",{nextEl:t.find("> .swiper-button-next").get(0),prevEl:t.find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{activeIndexChange:function(){var t=this.slides[this.activeIndex],e=a(t).find("video").get(0);e&&e.play()}}));n.each((function(){new Swiper(a(this).get(0),e(e(e(e(e(e(e(e(e(e({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"nested",!0),"watchOverflow",!0),"pagination",{el:a(this).find("> .swiper-pagination").get(0),type:"bullets",clickable:!0,hideOnClick:!1}),"navigation",{nextEl:a(this).find("> .swiper-button-next").get(0),prevEl:a(this).find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{activeIndexChange:function(){var t=this.slides[this.activeIndex],e=a(t).find("video").get(0);e&&e.play()}}))})),a(this).closest(".widget").find(".zoom-instagram-widget__items").magnificPopup({delegate:".zoom-instagram-link",type:"inline",inline:{src:t.closest(".wpz-insta-lightbox-wrapper")},gallery:{enabled:!0,navigateByImgClick:!1,preload:[0,1]},callbacks:{beforeOpen:function(){var e=t.find('[data-uid="'+this.currItem.el.attr("data-mfp-src")+'"]').index();void 0!==e&&i.slideTo(e),"function"==typeof window.wpzInstaFrontendInit&&window.wpzInstaFrontendInit()},afterClose:function(){t.find("video").each((function(){this.pause(),this.currentTime=0}))}}})}}))},a.fn.zoomInstagramWidget=function(t){return a(this).each((function(){var e,n,i=a(this),o=t||{},r=i.data("images-per-row"),s=i.data("image-width"),d=i.data("image-spacing"),m=(i.data("image-lazy-loading"),i.width());m/s<r?(e=r,n=Math.floor((m-1-(r-1)*d)/r)):(e=Math.floor((m-1)/s),n=Math.floor((m-1-(e-1)*d)/e)),(o.onlyNewItems&&void 0!==o.startIndex?i.find("li").slice(o.startIndex):i.find("li")).each((function(t){var n=(o.onlyNewItems&&void 0!==o.startIndex?o.startIndex+t:t)+1;n%e==1?a(this).css("clear","left"):a(this).css("clear","none"),n%e==0?a(this).css("margin-right","0"):(a(this).css("margin-right",d+"px"),a(this).css("margin-bottom",d+"px"))})),i.find("a.zoom-instagram-link").css({width:n,height:n}),i.find("a.zoom-instagram-link-old").lazy(),i.find(".zoom-instagram-link-new").lazy(),i.removeClass("zoom-instagram-widget__items--no-js")}))},a(window).on("resize orientationchange",(function(){t||(t=!0,(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)})(i))})),a(".zoom-instagram-widget__items").each((function(){var t=a(this);t.hasClass("layout-masonry")&&"function"==typeof a.fn.masonry?t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()})),a(".zoom-instagram-widget__items").zoomLoadAsyncImages(),a('.zoom-instagram-widget__items[data-lightbox="1"]').zoomLightbox();var o=_.debounce((function(){var t=a(".zoom-instagram-widget__items");t.length&&(t.each((function(){var t=a(this);t.hasClass("layout-masonry")&&"function"==typeof a.fn.masonry?t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()})),a(".zoom-instagram-widget__items").zoomLoadAsyncImages())}),1500);a(document).on("panels_setup_preview",o),a(document).on("wpz-insta:loaded-more",(function(){n()})),a(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/widget",(function(t){"wpzoom-elementor-instagram-widget.default"==t.data("widget_type")&&t.find(".zoom-instagram-widget__items").each((function(){var t=a(this);t.hasClass("layout-masonry")&&"function"==typeof a.fn.masonry?t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()}))}))}))}))})();