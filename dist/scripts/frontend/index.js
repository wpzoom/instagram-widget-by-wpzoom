(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,i,n){return(i=function(e){var i=function(e){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(i)?i:i+""}(i))in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var i;(i=jQuery)(window).on("load",(function(){var t=!1;function n(){i(".wpzinsta-pro-load-more-btn").off("click.loadmore").on("click.loadmore",(function(t){t.preventDefault();var e=i(this),n=e.closest(".wpzinsta-pro-load-more-wrapper"),o=e.closest(".zoom-instagram"),r=o.find(".zoom-instagram-widget__items");if("true"!==n.attr("data-disabled")&&!e.prop("disabled")&&!e.hasClass("loading")){var d=e.attr("data-feed-id"),s=e.attr("data-item-amount"),l=e.attr("data-image-size"),m=e.attr("data-allowed-post-types"),c=e.attr("data-next-url"),g=e.attr("data-nonce");if(c){e.addClass("loading").prop("disabled",!0),n.addClass("loading");var u=e.find(".button-text").text();e.find(".button-text").text("Loading..."),i.ajax({url:wpzInstaAjax.ajaxurl,type:"POST",dataType:"json",data:{action:"wpzoom_instagram_load_more",feed_id:d,item_amount:s,image_size:l,allowed_post_types:m,next:c,_wpnonce:g},success:function(t){t.success&&t.data.html?(r.append(t.data.html),t.data.has_more&&t.data.next_url?e.attr("data-next-url",t.data.next_url):e.hide(),r.zoomLoadAsyncImages(),a(),o.trigger("wpz-insta:loaded-more",[t.data])):(console.error("Load more failed:",t.data||"Unknown error"),e.hide())},error:function(t,i,n){console.error("AJAX load more error:",n),e.hide()},complete:function(){e.removeClass("loading").prop("disabled",!1),n.removeClass("loading"),e.find(".button-text").text(u)}})}else e.hide()}}))}function a(){t||(t=!0,(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)})(o))}function o(){i(".zoom-instagram-widget__items").zoomInstagramWidget(),t=!1}n(),i.fn.zoomLoadAsyncImages=function(){return i(this).each((function(){var t=i(this),e=t.data("image-width"),n=t.data("image-resolution"),a=t.find("li").filter((function(){return i(this).data("media-id")})).map((function(){return{"media-id":i(this).attr("data-media-id"),nonce:i(this).attr("data-nonce"),"regenerate-thumbnails":i(this)[0].hasAttribute("data-regenerate-thumbnails")}}));a.length&&function(i,a){a=a||3;for(var o=0;o<i.length;o+=a)i.slice(o,o+a).forEach((function(i){wp.ajax.post("wpzoom_instagram_get_image_async",{"media-id":i["media-id"],nonce:i.nonce,"image-resolution":n,"image-width":e,"regenerate-thumbnails":i["regenerate-thumbnails"]}).done((function(e){t.find('li[data-media-id="'+i["media-id"]+'"] .zoom-instagram-link').css("background-image","url("+e.image_src+")")})).fail((function(){}))}))}(a.toArray(),3)}))},i.fn.zoomLightbox=function(){return i(this).each((function(){var t=i(this).closest(".widget").find(".wpz-insta-lightbox-wrapper > .swiper");if(t.length>0){var n=t.find(".image-wrapper > .swiper"),a=new Swiper(t.get(0),e(e(e(e(e(e(e(e(e({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"autoHeight",!1),"watchOverflow",!0),"navigation",{nextEl:t.find("> .swiper-button-next").get(0),prevEl:t.find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{activeIndexChange:function(){var t=this.slides[this.activeIndex],e=i(t).find("video").get(0);e&&e.play()}}));n.each((function(){new Swiper(i(this).get(0),e(e(e(e(e(e(e(e(e(e({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"nested",!0),"watchOverflow",!0),"pagination",{el:i(this).find("> .swiper-pagination").get(0),type:"bullets",clickable:!0,hideOnClick:!1}),"navigation",{nextEl:i(this).find("> .swiper-button-next").get(0),prevEl:i(this).find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{activeIndexChange:function(){var t=this.slides[this.activeIndex],e=i(t).find("video").get(0);e&&e.play()}}))})),i(this).closest(".widget").find(".zoom-instagram-widget__items").magnificPopup({delegate:".zoom-instagram-link",type:"inline",inline:{src:t.closest(".wpz-insta-lightbox-wrapper")},gallery:{enabled:!0,navigateByImgClick:!1,preload:[0,1]},callbacks:{beforeOpen:function(){var e=t.find('[data-uid="'+this.currItem.el.attr("data-mfp-src")+'"]').index();void 0!==e&&a.slideTo(e),"function"==typeof window.wpzInstaFrontendInit&&window.wpzInstaFrontendInit()},afterClose:function(){t.find("video").each((function(){this.pause(),this.currentTime=0}))}}})}}))},i.fn.zoomInstagramWidget=function(){return i(this).each((function(){var t,e,n=i(this),a=n.data("images-per-row"),o=n.data("image-width"),r=n.data("image-spacing"),d=(n.data("image-lazy-loading"),n.width());d/o<a?(t=a,e=Math.floor((d-1-(a-1)*r)/a)):(t=Math.floor((d-1)/o),e=Math.floor((d-1-(t-1)*r)/t)),n.find("li").each((function(e){var n=++e;n%t==1?i(this).css("clear","left"):i(this).css("clear","none"),n%t==0?i(this).css("margin-right","0"):(i(this).css("margin-right",r+"px"),i(this).css("margin-bottom",r+"px"))})),n.find("a.zoom-instagram-link").css({width:e,height:e}),n.find("a.zoom-instagram-link-old").lazy(),n.find(".zoom-instagram-link-new").lazy(),n.removeClass("zoom-instagram-widget__items--no-js")}))},i(window).on("resize orientationchange",a),a(),i(".zoom-instagram-widget__items").zoomLoadAsyncImages(),i('.zoom-instagram-widget__items[data-lightbox="1"]').zoomLightbox();var r=_.debounce((function(){i(".zoom-instagram-widget__items").length&&(i(".zoom-instagram-widget__items").zoomInstagramWidget(),i(".zoom-instagram-widget__items").zoomLoadAsyncImages())}),1500);i(document).on("panels_setup_preview",r),i(document).on("wpz-insta:loaded-more",(function(){n()})),i(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/widget",(function(t){"wpzoom-elementor-instagram-widget.default"==t.data("widget_type")&&a()}))}))}))})();