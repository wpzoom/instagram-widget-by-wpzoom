(()=>{function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i(t)}function t(t,e,n){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var e;(e=jQuery)(window).on("load",(function(){var n=!1;function a(){n||(n=!0,(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(i){window.setTimeout(i,1e3/60)})(o))}function o(){e(".zoom-instagram-widget__items").zoomInstagramWidget(),n=!1}e.fn.zoomLoadAsyncImages=function(){return e(this).each((function(){var i=e(this),t=i.data("image-width"),n=i.data("image-resolution"),a=i.find("li").filter((function(){return e(this).data("media-id")})).map((function(){return{"media-id":e(this).attr("data-media-id"),nonce:e(this).attr("data-nonce"),"regenerate-thumbnails":e(this)[0].hasAttribute("data-regenerate-thumbnails")}})),o=function(e){if(0!=e.length){var a=e.shift();wp.ajax.post("wpzoom_instagram_get_image_async",{"media-id":a["media-id"],nonce:a.nonce,"image-resolution":n,"image-width":t,"regenerate-thumbnails":a["regenerate-thumbnails"]}).done((function(t){i.find('li[data-media-id="'+a["media-id"]+'"] .zoom-instagram-link').css("background-image","url("+t.image_src+")")})).fail((function(){})).always((function(){o(e)}))}};a.length&&o(a.toArray())}))},e.fn.zoomLightbox=function(){return e(this).each((function(){var n=e(this).closest(".widget").find(".wpz-insta-lightbox-wrapper > .swiper");if(n.length>0){var a=n.find(".image-wrapper > .swiper");new Swiper(n.get(0),t(t(t(t(t(t(t(t(t({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"autoHeight",!1),"watchOverflow",!0),"navigation",{nextEl:n.find("> .swiper-button-next").get(0),prevEl:n.find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{activeIndexChange:function(){var i=this.slides[this.activeIndex],t=e(i).find("video").get(0);t&&t.play()}})),a.each((function(){new Swiper(e(this).get(0),t(t(t(t(t(t(t(t(t(t({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"nested",!0),"watchOverflow",!0),"pagination",{el:e(this).find("> .swiper-pagination").get(0),type:"bullets",clickable:!0,hideOnClick:!1}),"navigation",{nextEl:e(this).find("> .swiper-button-next").get(0),prevEl:e(this).find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{activeIndexChange:function(){var i=this.slides[this.activeIndex],t=e(i).find("video").get(0);t&&t.play()}}))})),e(this).find(".zoom-instagram-link").magnificPopup({items:{type:"inline",src:e(this).closest(".widget").find(".wpz-insta-lightbox-wrapper")},closeBtnInside:!1,mainClass:"wpzoom-lightbox",midClick:!0,callbacks:{open:function(){var t=e.magnificPopup.instance.st.el,n=this.content.find("> .swiper").get(0).swiper;this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+t.data("mfp-src")+'"] video')&&this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+t.data("mfp-src")+'"] video').trigger("play"),"object"===i(n)&&n.slideTo(this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+t.data("mfp-src")+'"]').index())}}}),e(this).find(".zoom-instagram-link").addClass("magnific-active")}}))},e.fn.zoomInstagramWidget=function(){return e(this).each((function(){var i,t,n=e(this),a=n.data("images-per-row"),o=n.data("image-width"),r=n.data("image-spacing"),s=(n.data("image-lazy-loading"),n.width());s/o<a?(i=a,t=Math.floor((s-1-(a-1)*r)/a)):(i=Math.floor((s-1)/o),t=Math.floor((s-1-(i-1)*r)/i)),n.find("li").each((function(t){var n=++t;n%i==1?e(this).css("clear","left"):e(this).css("clear","none"),n%i==0?e(this).css("margin-right","0"):(e(this).css("margin-right",r+"px"),e(this).css("margin-bottom",r+"px"))})),n.find("a.zoom-instagram-link").css({width:t,height:t}),n.find("a.zoom-instagram-link-old").lazy(),n.find(".zoom-instagram-link-new").lazy(),n.removeClass("zoom-instagram-widget__items--no-js")}))},e(window).on("resize orientationchange",a),a(),e(".zoom-instagram-widget__items").zoomLoadAsyncImages(),e('.zoom-instagram-widget__items[data-lightbox="1"]').zoomLightbox();var r=_.debounce((function(){e(".zoom-instagram-widget__items").length&&(e(".zoom-instagram-widget__items").zoomInstagramWidget(),e(".zoom-instagram-widget__items").zoomLoadAsyncImages())}),1500);e(document).on("panels_setup_preview",r),e(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/widget",(function(i){"wpzoom-elementor-instagram-widget.default"==i.data("widget_type")&&a()}))}))}))})();