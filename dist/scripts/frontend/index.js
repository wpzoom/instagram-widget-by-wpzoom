(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,i,a){return(i=function(e){var i=function(e){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(i)?i:i+""}(i))in e?Object.defineProperty(e,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[i]=a,e}var i;(i=jQuery)(window).on("load",function(){var a=!1;function n(){i(".wpzinsta-pro-load-more-btn").off("click.loadmore").on("click.loadmore",function(a){a.preventDefault();var n=i(this),o=n.closest(".wpzinsta-pro-load-more-wrapper"),s=n.closest(".zoom-instagram"),r=s.find(".zoom-instagram-widget__items");if("true"!==o.attr("data-disabled")&&!n.prop("disabled")&&!n.hasClass("loading")){var d=n.attr("data-feed-id"),l=n.attr("data-item-amount"),m=n.attr("data-image-size"),p=n.attr("data-allowed-post-types"),c=n.attr("data-next-url"),g=n.attr("data-nonce");if(c){n.addClass("loading").prop("disabled",!0),o.addClass("loading");var f=n.find(".button-text").text();n.find(".button-text").text("Loading..."),i.ajax({url:wpzInstaAjax.ajaxurl,type:"POST",dataType:"json",data:{action:"wpzoom_instagram_load_more",feed_id:d,item_amount:l,image_size:m,allowed_post_types:p,next:c,_wpnonce:g},success:function(a){if(a.success&&a.data.html){var o=r.find("li").length;if(r.append(a.data.html),a.data.has_more&&a.data.next_url?n.attr("data-next-url",a.data.next_url):n.hide(),r.zoomLoadAsyncImages(),r.hasClass("layout-masonry"))if("function"==typeof i.fn.masonry){var d=r.find("li").slice(o);r.data("masonry")||r.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(r.data("spacing")||10)}),r.masonry("appended",d)}else setTimeout(function(){r.zoomInstagramWidget({onlyNewItems:!0,startIndex:o})},100);else setTimeout(function(){r.zoomInstagramWidget({onlyNewItems:!0,startIndex:o})},100);if("1"===r.attr("data-lightbox")&&a.data.lightbox_html){var l=s.find(".wpz-insta-lightbox-wrapper .swiper-wrapper");if(l.length>0){l.append(a.data.lightbox_html);var m=l.parent();m.length>0&&m.get(0).swiper&&m.get(0).swiper.update(),l.find(".image-wrapper > .swiper").each(function(){this.swiper||new Swiper(this,e(e(e(e(e(e(e(e(e(e({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"nested",!0),"watchOverflow",!0),"pagination",{el:i(this).find("> .swiper-pagination").get(0),type:"bullets",clickable:!0,hideOnClick:!1}),"navigation",{nextEl:i(this).find("> .swiper-button-next").get(0),prevEl:i(this).find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{activeIndexChange:function(){var t=this.slides[this.activeIndex],e=i(t).find("video").get(0);e&&e.play()}}))});var p=r.find("li").slice(o).find(".zoom-instagram-link");p.length>0&&(p.magnificPopup({items:{type:"inline",src:l.closest(".wpz-insta-lightbox-wrapper")},closeBtnInside:!1,mainClass:"wpzoom-lightbox",midClick:!0,callbacks:{open:function(){var e=i.magnificPopup.instance.st.el,a=this.content.find("> .swiper").get(0).swiper;if(this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+e.data("mfp-src")+'"] video')&&this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+e.data("mfp-src")+'"] video').trigger("play"),"object"===t(a)){var n=this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+e.data("mfp-src")+'"]').index();a.slideTo(n)}},afterClose:function(){m.find("video").each(function(){this.pause(),this.currentTime=0})}}}),p.addClass("magnific-active"))}else r.zoomLightbox()}s.trigger("wpz-insta:loaded-more",[a.data])}else console.error("Load more failed:",a.data||"Unknown error"),n.hide()},error:function(t,e,i){console.error("AJAX load more error:",i),n.hide()},complete:function(){n.removeClass("loading").prop("disabled",!1),o.removeClass("loading"),n.find(".button-text").text(f)}})}else n.hide()}})}function o(){i(".zoom-instagram-widget__items").each(function(){var t=i(this);t.hasClass("layout-masonry")&&"function"==typeof i.fn.masonry?t.data("masonry")?t.masonry("layout"):t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()}),a=!1}n(),i(".wpz-insta-ajax-placeholder").each(function(){var t=i(this),e=t.data("feed-id"),a=t.data("nonce");!e||t.hasClass("loading")||t.hasClass("loaded")||(t.addClass("loading"),i.ajax({url:wpzInstaAjax.ajaxurl,type:"POST",dataType:"json",data:{action:"wpzoom_instagram_initial_load",feed_id:e,_wpnonce:a},success:function(a){if(a.success&&a.data.html){var o=i(a.data.html);t.replaceWith(o);var s=o.hasClass("zoom-instagram")?o:o.find(".zoom-instagram");if(s.length>0){var r=s.find(".zoom-instagram-widget__items");if(r.length>0){if(s.hasClass("layout-carousel")){var d=s.find("> .zoom-instagram-widget__items-wrapper.swiper");if(d.length>0&&"undefined"!=typeof Swiper){var l=parseInt(r.data("perpage"))||3,m=parseInt(r.data("perpage-tablet"))||l,p=parseInt(r.data("perpage-mobile"))||l,c=parseFloat(r.data("spacing"))||20;"function"==typeof i.fn.lazy&&(r.find(".zoom-instagram-link-new").lazy(),r.find("a.zoom-instagram-link-old").lazy());var g=new Swiper(d.get(0),{direction:"horizontal",loop:!1,slidesPerView:l,spaceBetween:c,breakpoints:{320:{slidesPerView:p,spaceBetween:c},480:{slidesPerView:m,spaceBetween:c},769:{slidesPerView:l,spaceBetween:c}},autoHeight:!0,watchOverflow:!0,navigation:{nextEl:d.find("> .swiper-button-next").get(0),prevEl:d.find("> .swiper-button-prev").get(0)},keyboard:{enabled:!0,onlyInViewport:!0}});s.addClass("carousel-active");var f=r.find("img"),w=0,u=f.length;u>0&&(f.each(function(){this.complete?++w===u&&g.update():i(this).on("load error",function(){++w===u&&g.update()})}),setTimeout(function(){g.update()},500))}}else r.hasClass("layout-masonry")&&"function"==typeof i.fn.masonry?r.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(r.data("spacing")||10)}):r.zoomInstagramWidget();r.zoomLoadAsyncImages(),"1"===r.attr("data-lightbox")&&r.zoomLightbox()}n(),"function"==typeof window.wpzInstaFrontendInit&&window.wpzInstaFrontendInit(),"function"==typeof window.wpzInstaInitStories&&window.wpzInstaInitStories(),"function"==typeof window.wpzInstaMultiAccountStoriesInit&&window.wpzInstaMultiAccountStoriesInit(),"function"==typeof window.wpzInstaMultiAccountLoadMoreInit&&window.wpzInstaMultiAccountLoadMoreInit(),"function"==typeof window.wpzInstaProLoadMoreInit&&window.wpzInstaProLoadMoreInit(),s.trigger("wpz-insta:ajax-loaded",[e,a.data])}}else console.error("Failed to load Instagram feed:",a.data||"Unknown error"),t.removeClass("loading").addClass("error")},error:function(e,i,a){console.error("AJAX initial feed load error:",a),t.removeClass("loading").addClass("error")}}))}),i.fn.zoomLoadAsyncImages=function(){return i(this).each(function(){var t=i(this),e=t.data("image-width"),a=t.data("image-resolution"),n=t.find("li").filter(function(){return i(this).data("media-id")}).map(function(){return{"media-id":i(this).attr("data-media-id"),nonce:i(this).attr("data-nonce"),"regenerate-thumbnails":i(this)[0].hasAttribute("data-regenerate-thumbnails")}});n.length&&function(i,n){n=n||3;for(var o=0;o<i.length;o+=n)i.slice(o,o+n).forEach(function(i){wp.ajax.post("wpzoom_instagram_get_image_async",{"media-id":i["media-id"],nonce:i.nonce,"image-resolution":a,"image-width":e,"regenerate-thumbnails":i["regenerate-thumbnails"]}).done(function(e){t.find('li[data-media-id="'+i["media-id"]+'"] .zoom-instagram-link').css("background-image","url("+e.image_src+")")}).fail(function(){})})}(n.toArray(),3)})},i.fn.zoomLightbox=function(){return i(this).each(function(){var a=i(this).closest(".widget").find(".wpz-insta-lightbox-wrapper > .swiper");if(0===a.length&&(a=i(this).closest(".zoom-instagram").find(".wpz-insta-lightbox-wrapper > .swiper")),0===a.length&&(a=i(this).parent().parent().find(".wpz-insta-lightbox-wrapper > .swiper")),a.closest(".wpz-insta-lightbox-wrapper"),a.length>0){var n=a.find(".image-wrapper > .swiper");new Swiper(a.get(0),e(e(e(e(e(e(e(e(e({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"autoHeight",!1),"watchOverflow",!0),"navigation",{nextEl:a.find("> .swiper-button-next").get(0),prevEl:a.find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{activeIndexChange:function(){var t=this.slides[this.activeIndex],e=i(t).find("video").get(0);e&&e.play()}})),n.each(function(){new Swiper(i(this).get(0),e(e(e(e(e(e(e(e(e(e({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"nested",!0),"watchOverflow",!0),"pagination",{el:i(this).find("> .swiper-pagination").get(0),type:"bullets",clickable:!0,hideOnClick:!1}),"navigation",{nextEl:i(this).find("> .swiper-button-next").get(0),prevEl:i(this).find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{activeIndexChange:function(){var t=this.slides[this.activeIndex],e=i(t).find("video").get(0);e&&e.play()}}))});var o=i(this).closest(".widget").find(".zoom-instagram-widget__items");0===o.length&&(o=i(this).closest(".zoom-instagram").find(".zoom-instagram-widget__items")),0===o.length&&(o=i(this)),o.find(".zoom-instagram-link").magnificPopup({items:{type:"inline",src:a.closest(".wpz-insta-lightbox-wrapper")},closeBtnInside:!1,mainClass:"wpzoom-lightbox",midClick:!0,callbacks:{open:function(){var e=i.magnificPopup.instance.st.el,a=this.content.find("> .swiper").get(0).swiper;this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+e.data("mfp-src")+'"] video')&&this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+e.data("mfp-src")+'"] video').trigger("play"),"object"===t(a)&&a.slideTo(this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+e.data("mfp-src")+'"]').index())},afterClose:function(){a.find("video").each(function(){this.pause(),this.currentTime=0})}}}),o.find(".zoom-instagram-link").addClass("magnific-active")}})},i.fn.zoomInstagramWidget=function(t){return i(this).each(function(){var e,a,n=i(this),o=t||{},s=n.data("images-per-row"),r=n.data("image-width"),d=n.data("image-spacing"),l=(n.data("image-lazy-loading"),n.width());l/r<s?(e=s,a=Math.floor((l-1-(s-1)*d)/s)):(e=Math.floor((l-1)/r),a=Math.floor((l-1-(e-1)*d)/e)),(o.onlyNewItems&&void 0!==o.startIndex?n.find("li").slice(o.startIndex):n.find("li")).each(function(t){var a=(o.onlyNewItems&&void 0!==o.startIndex?o.startIndex+t:t)+1;a%e==1?i(this).css("clear","left"):i(this).css("clear","none"),a%e==0?i(this).css("margin-right","0"):(i(this).css("margin-right",d+"px"),i(this).css("margin-bottom",d+"px"))}),n.find("a.zoom-instagram-link").css({width:a,height:a}),n.find("a.zoom-instagram-link-old").lazy(),n.find(".zoom-instagram-link-new").lazy(),n.removeClass("zoom-instagram-widget__items--no-js")})},i(window).on("resize orientationchange",function(){a||(a=!0,(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)})(o))}),i(".zoom-instagram-widget__items").each(function(){var t=i(this);t.hasClass("layout-masonry")&&"function"==typeof i.fn.masonry?t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()}),i(".zoom-instagram-widget__items").zoomLoadAsyncImages(),i('.zoom-instagram-widget__items[data-lightbox="1"]').zoomLightbox();var s=_.debounce(function(){var t=i(".zoom-instagram-widget__items");t.length&&(t.each(function(){var t=i(this);t.hasClass("layout-masonry")&&"function"==typeof i.fn.masonry?t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()}),i(".zoom-instagram-widget__items").zoomLoadAsyncImages())},1500);i(document).on("panels_setup_preview",s),i(document).on("wpz-insta:loaded-more",function(){n()}),i(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/widget",function(t){"wpzoom-elementor-instagram-widget.default"==t.data("widget_type")&&t.find(".zoom-instagram-widget__items").each(function(){var t=i(this);t.hasClass("layout-masonry")&&"function"==typeof i.fn.masonry?t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()})})})})})();